{% extends "network/layout.html" %}
{% load static %}
{% load i18n %}

{% block title %}
    {% trans 'DMs' %}
{% endblock %}

{% block body %}
    <div class="section-identifier">
        <div class="section-identifier-inner">
            {% trans 'Direct Messages' %}
        </div>
    </div>


    <!-- Thing to start a new thread (or put it above?) -->
    <!-- should the new thread thing be a separate html page? -->
    <div class="section-identifier no-top-padding">
        <div class="section-identifier-inner-leftright">
            <div>{% trans 'New Conversation' %}</div>
            <div>
                <i class="fas fa-comment-medical"></i>
            </div>
        </div>
    </div>


    <div class="new-posts-container">
        <a href="" class="no-decoration-link">
            <div hidden id="new-posts-inner">
                {% trans 'No new messages (you should not see this)' %}
            </div>
        </a>
    </div>


    <!-- List of inbox messages -->
    <div id="posts-all-container-div">
        {% for thread in threads %}
            <div class="post-div {% if thread.has_unread %}unread-dm{% endif %}">
                <div class="inbox-avatar-div">
                    <a href="{% url 'user' thread.convo_partner.username %}">
                        <img class="profile-pic" src="{{ thread.convo_partner.avatar.url }}">
                    </a>
                </div>
                <div class="post-content-div"> <!-- flex-column -->
                    <div class="post-username-header-div"> <!-- flex row -->
                        <a href="{% url 'user' thread.convo_partner.username %}" class="post-username-header-link">
                            <div class="post-username-header-displayname">
                                {{ thread.convo_partner.displayname }}
                            </div>
                        </a>
                        <a href="{% url 'user' thread.convo_partner.username %}" class="post-username-header-link">
                            <div class="post-username-header-username">
                                @{{ thread.convo_partner.username }}
                            </div>
                        </a>
                    </div>
                    <div>
                        <!-- TODO: instead of making this a link, make the whole box a link! -->
                        <a href="{% url 'dm_thread' thread.convo_partner.username %}">
                            {{ thread.preview_text }}
                        </a>
                    </div>
                </div>
                <div> <!-- give a class -->
                    {{ thread.timestamp_f }}
                </div>
            </div>
        {% empty %}
            <div class="section-identifier no-top-padding">
                <div class="no-posts-found">
                    {% trans 'You don\'t have any messages üôÅ' %}
                </div>
            </div>
        {% endfor %}
    </div>


    <!-- Maybe pagination? -->

{% endblock %}

{% block script %}
{% endblock %}